(function(e){function t(t){for(var i,o,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={app:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0028":function(e,t,n){},"0847":function(e,t,n){"use strict";var i=n("94d0"),r=n.n(i);r.a},"0c43":function(e,t,n){"use strict";var i=n("cff9"),r=n.n(i);r.a},"136d":function(e,t,n){"use strict";var i=n("bd25"),r=n.n(i);r.a},"16f9":function(e,t,n){"use strict";var i=n("c188"),r=n.n(i);r.a},"217c":function(e,t,n){},2710:function(e,t,n){"use strict";var i=n("947a"),r=n.n(i);r.a},"282c":function(e,t,n){"use strict";var i=n("4564"),r=n.n(i);r.a},"32ad":function(e,t,n){},3472:function(e,t,n){"use strict";var i=n("77c7"),r=n.n(i);r.a},4564:function(e,t,n){},"462b":function(e,t,n){"use strict";var i=n("f5ef"),r=n.n(i);r.a},"4ae2":function(e,t,n){},"4fbf":function(e,t,n){"use strict";var i=n("f65d"),r=n.n(i);r.a},"53b5":function(e,t,n){},"53f0":function(e,t,n){"use strict";var i=n("7a0f"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=n("9955"),a=n.n(r),o=n("2ef0"),s=n.n(o),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("router-view"),n("div",{attrs:{id:"nav"}},[n("router-link",{class:{"router-link-active":e.isDefaultRoute},attrs:{to:"/"}},[e._v(" Playground ")]),e._v(" | "),n("router-link",{attrs:{to:"/about"}},[e._v(" About ")])],1)],1)},u=[],l=(n("caad"),n("b0c0"),{computed:{isDefaultRoute:function(){return["song","predict",void 0].includes(this.$route.name)}}}),d=l,p=(n("5c0b"),n("2877")),h=Object(p["a"])(d,c,u,!1,null,null,null),f=h.exports,m=(n("99af"),n("8c4f")),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("github-ribbon"),e._m(0),n("div",{staticClass:"about-content"},[n("h2",[e._v("Instructions")]),n("div",{staticClass:"content-body"},[n("ol",{attrs:{id:"instruction-list"}},[n("li",[e._v("Search and select a pop song you like. This will give the model a good idea of what style to play in.")]),n("li",[e._v(" Press the "),n("v-btn",{attrs:{color:"red darken-2",dark:"",small:"",fab:""}},[n("v-icon",[e._v("cached")])],1),e._v(" generate button. This will create a new variation on the song you selected. ")],1),n("li",[e._v(" Press "),n("v-btn",{attrs:{color:"blue darken-2",dark:"",small:"",fab:""}},[n("v-icon",[e._v("play_arrow")])],1),e._v(" play to hear the output! ")],1),n("li",[e._v("Repeat as many times as you want. You'll get a different variation each time.")])])]),n("h2",[e._v("Cool Examples")]),n("div",{staticClass:"content-body"},[n("v-btn-toggle",{staticClass:"control-group-toggle",attrs:{mandatory:""},model:{value:e.window,callback:function(t){e.window=t},expression:"window"}},e._l(e.predictionTypes,(function(t,i){return n("v-btn",{key:t.name,attrs:{text:"",value:i,color:"red"}},[e._v(" "+e._s(t.displayName)+" ")])})),1),n("v-window",{staticClass:"elevation-1",model:{value:e.window,callback:function(t){e.window=t},expression:"window"}},[n("v-window-item",{key:0},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("div",{staticClass:"title"},[e._v(" Start with few notes and continue the idea. ")]),n("ul",[n("li",[n("router-link",{attrs:{to:"/predict/e06828d196b2d5182cd459c273d609ac"}},[e._v(" Cannon in D - Pachelbel ")])],1),n("li",[n("router-link",{attrs:{to:"/predict/3a68d55f76b2900ac1441ca357b057ab"}},[e._v(" Wake Me Up - Avicii ")])],1)])])],1)],1),n("v-window-item",{key:1},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("div",{staticClass:"title"},[e._v(" Generate a new melody on top of an existing chord progression. ")]),n("ul",[n("li",[n("router-link",{attrs:{to:"/predict/551ca93cda1d2bdaa6e4d87888de893f"}},[e._v(" The Middle - Zedd ")])],1),n("li",[n("router-link",{attrs:{to:"/predict/2674406ddc3eed0adaa47355d92a7e8f"}},[e._v(" Scary Monsters and Nice Sprites - Skrillex ")])],1)])])],1)],1),n("v-window-item",{key:2},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("div",{staticClass:"title"},[e._v(" Add chords to your melody ")]),n("ul",[n("li",[n("router-link",{attrs:{to:"/predict/2b4f5e6613f366bad7b4f39c61be32b9"}},[e._v(" Where Is The Love - Black Eyed Peas ")])],1)])])],1)],1),n("v-window-item",{key:3},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("div",{staticClass:"title"},[e._v(" Generate a completely new song in the exact same tempo as the original ")]),n("ul",[n("li",[n("router-link",{attrs:{to:"/predict/1bbfcb942133414a5664a35a7e7b5612"}},[e._v(" Levels - Avicii ")])],1)])])],1)],1),n("v-window-item",{key:4},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("div",{staticClass:"title"},[e._v(" Same song, but with a remixed rhythm ")]),n("ul",[n("li",[n("router-link",{attrs:{to:"/predict/dd79fa52adaaed58a2945c1992ecada6"}},[e._v(" Fur Elise - Beethoven ")])],1),n("li",[n("router-link",{attrs:{to:"/predict/71d7ff59f67fffa98614c841101e1b6b"}},[e._v(" Scary Monsters and Nice Sprites - Skrillex ")])],1)])])],1)],1)],1)],1),n("h2",[e._v("Note Types")]),e._m(1),n("h2",[e._v("What is it?")]),e._m(2),n("h2",[e._v("Advanced Controls")]),e._m(3),e._m(4),e._m(5),n("h2",[e._v("Source Code")]),e._m(6),n("h2",[e._v("Acknowledgements")]),e._m(7)])],1)},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about-header"},[n("h1",[e._v("MusicAutobot - The Pop Music Generator")]),n("span",{staticClass:"about-subtext"},[e._v("Give it a few notes, and it'll autocomplete your song!")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-body"},[e._v(" Here's what all the colors on the grid mean: "),n("ul",[n("li",[n("div",{staticClass:"note seed"}),e._v(" = Seed notes. The model uses these to predict the next sequence.")]),n("li",[n("div",{staticClass:"note generated"}),e._v(" = Generated notes - they get replaced on every new prediction.")]),n("li",[n("div",{staticClass:"note original"}),e._v(" = Original notes of the song.")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-body"},[n("p",[e._v("MusicAutobot is a music model trained on a bunch of MIDI music found on the internet.")]),n("h4",[e._v("Deep Learning Model")]),e._v(" Recent advances in deep learning has produced amazing "),n("a",{attrs:{href:"https://transformer.huggingface.co/"}},[e._v("results")]),e._v(" in generating text. "),n("p",[e._v("We apply those same principles to music generation. Our model is based on several different variations of the transformer ("),n("a",{attrs:{href:"https://ai.googleblog.com/2019/01/transformer-xl-unleashing-potential-of.html"}},[e._v("TransformerXL")]),e._v(", "),n("a",{attrs:{href:""}},[e._v("SequenceToSequence")]),e._v(", and "),n("a",{attrs:{href:"https://ai.googleblog.com/2018/11/open-sourcing-bert-state-of-art-pre.html"}},[e._v("BERT")]),e._v(")")]),n("p",[e._v("This allows us to do really cool things like song generation, harmonization, generating melodies, and remixing existing songs.")]),n("h4",[e._v("Data")]),e._v(" MIDI files gathered from the internet to train the model. Sources include - classical, jazz, pop and edm. "),n("br"),n("h4",[e._v("Blog Series")]),e._v(" Inner workings are explained in more detail in this 4 part blog post: "),n("ul",[n("li",[n("a",{attrs:{href:"https://medium.com/@andrew.t.shaw/5867511b382a"}},[e._v("Part I - Music Models")])]),n("li",[n("a",{attrs:{href:"https://medium.com/@andrew.t.shaw/755c62560ec2"}},[e._v("Part II - Deep Dive")])]),n("li",[n("a",{attrs:{href:"https://medium.com/@andrew.t.shaw/3d80bd2ea08e"}},[e._v("Part III - Multitask Models")])]),n("li",[n("a",{attrs:{href:"https://medium.com/@andrew.t.shaw/6b920359248c"}},[e._v("Part IV - Remixing a Drop")])])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-body"},[n("h4",[e._v("Seed length")]),n("ul",[n("li",[e._v("Choose how much of the original song gets sent to the model for prediction")]),n("li",[e._v("Longer snippets give the model a better idea of the style to play in. It'll generate something more coherent, but less creative")])]),n("div",{attrs:{id:"about-seed"}},[e._v(" â† Drag the brown dotted vertical line to change the seed length. "),n("br"),n("div",{staticClass:"note seed"}),e._v(" notes are used to predict the next sequence. "),n("br"),n("div",{staticClass:"note generated"}),e._v(" notes are overwritten with new predicted notes. ")]),n("h4",[e._v(" Grid editor ")]),e._v(" The grid is a basic MIDI sequencer. Edit the song notes to generate even cooler music! "),n("br"),n("ul",[n("li",[e._v("Add a note by clicking any spot in the grid")]),n("li",[e._v("Change the note pitch by draging it up or down")]),n("li",[e._v("Change the note length by draging the ends of the note longer or shorter")]),n("li",[e._v("Remove a note by collapsing the note ends.")])]),n("h4",{attrs:{id:"header-random"}},[e._v(" Creativity ")]),e._v(" Alter how wild and creative you want the generated music should be. "),n("ul",[n("li",[e._v("Pitch - amount of random variation in note pitch (C2, D2, E2, ..., F6, G6, A6)")]),n("li",[e._v("Rhythm - amount of random variation in note length (sixteenth, quarter, half notes)")])]),n("h4",{attrs:{id:"header-playback"}},[e._v(" Playback controls ")]),n("ul",[n("li",[e._v("Change the BPM to play faster/slower.")]),n("li",[e._v("Playback instrument. More coming soon!")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[e._v(" What's with the name? "),i("img",{attrs:{id:"icon-autobot",src:n("c1c2")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-body"},[e._v(" This project is powerd by a Music Transformer"),n("br"),e._v(" Autobots are the coolest of all Transfromers."),n("br"),e._v(" Music Transformer = MusicAutobot"),n("br")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"variation-list"},[n("li",[n("a",{attrs:{href:"https://github.com/bearpelican/musicautobot_vueapp",target:"_blank"}},[e._v("Vue App")])]),n("li",[n("a",{attrs:{href:"https://github.com/bearpelican/musicautobot",target:"_blank"}},[e._v("Python Model")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"variation-list"},[n("li",[n("a",{attrs:{href:"https://www.fast.ai/",target:"_blank"}},[e._v("Fast.Ai")])]),n("li",[n("a",{attrs:{href:"https://www.hooktheory.com/",target:"_blank"}},[e._v("HookTheory")])]),n("li",[n("a",{attrs:{href:"https://www.southparkcommons.com/",target:"_blank"}},[e._v("South Park Commons")])]),n("li",[n("a",{attrs:{href:"https://www.palapavc.com/",target:"_blank"}},[e._v("Palapa Ventures")])])])}],b=(n("d3b7"),n("ddb0"),n("b85c")),y=[{label:"whole",value:4,font:"A"},{label:"half",value:2,font:"B"},{label:"quarter",value:1,font:"C"},{label:"eighth",value:.5,font:"D"},{label:"sixteenth",value:.25,font:"E"},{label:"32nd",value:.125,font:"F"}];function w(e){var t,n=Object(b["a"])(y);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.value===e)return i}}catch(r){n.e(r)}finally{n.f()}}var k=w(1),_=w(.5),T=50,x=14,S=70,O=40,C=2,j=7,L={next:{name:"next",temp:[1.3,.8],filter:[24,.92],track:-1,displayName:"Autocomplete",description:"Builds a song using the blue notes. Red notes are overwritten"},melody:{name:"melody",temp:[1.4,1],filter:[24,.92],track:0,displayName:"Melody",description:"Create a new melody using the same chords."},chords:{name:"chords",temp:[.8,.8],filter:[12,.92],track:1,displayName:"Harmonize",description:"Generate new chords from the same melody."},pitch:{name:"pitch",temp:[1.2,0],filter:[24,.92],track:-1,displayName:"Pitch",description:"Create a new song in the exact same rhythm as the original."},rhythm:{name:"rhythm",temp:[0,1.2],filter:[24,.92],track:-1,displayName:"Rhythm",description:"Keep the same tune, but remix the rhythm."}};function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("notes"===e)return L.pitch;var n=s.a.isEmpty(t)?L.next:t;return s.a.get(L,e,n)}var M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"github-corner",attrs:{href:"https://github.com/bearpelican/musicautobot","aria-label":"View source on GitHub"}},[n("svg",{staticStyle:{fill:"#70B7FD",color:"#fff",position:"absolute",top:"0",border:"0",right:"0"},attrs:{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true"}},[n("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),n("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),n("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])},P=[],E=(n("2710"),{}),q=Object(p["a"])(E,M,P,!1,null,null,null),D=q.exports,R={name:"About",components:{GithubRibbon:D},data:function(){return{predictionTypes:this._.values(L),window:0}}},I=R,A=(n("0847"),Object(p["a"])(I,g,v,!1,null,"2b490a3f",null)),B=A.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"predict"},[n("header-controls",{attrs:{id:"header-controls"}}),0===e.tutorialStep?n("tutorial",{attrs:{id:"tutorial-one"}}):e._e(),n("sequencer",{style:e.sequenceStyle,scopedSlots:e._u([{key:"overlay",fn:function(){return[n("generate-button"),1===e.tutorialStep?n("tutorial-two",{attrs:{id:"tutorial-two"}}):e._e(),n("loading",{style:e.loadingStyle,attrs:{id:"loading-predict",value:e.loadingState}})]},proxy:!0}])}),n("footer-controls")],1)},F=[],K=n("5530"),V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"sequencer"}},[n("div",{ref:"scrollSection",attrs:{id:"section"}},[n("keyboard"),n("score",{attrs:{gridOpacity:e.gridOpacity}})],1),n("play-button",{attrs:{buttonID:"play-button"}}),e._t("overlay")],2)},X=[],G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"keyboard"},e._l(e.keys,(function(e,t){return n("key",{key:t,attrs:{index:t,keyType:e.type,pitch:e.name}})})),1)},W=[],z=(n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:e.classes,style:e.keyDimensions,on:{mousedown:e.mousedown}},[e._v(e._s(e.caption))])}),H=[],U=(n("a9e3"),n("2f62")),J=(n("c975"),n("b64b"),n("2909")),Y={C:"white","C#":"black",D:"white","D#":"black",E:"white",F:"white","F#":"black",G:"white","G#":"black",A:"white","A#":"black",B:"white"};function Z(){for(var e=[],t=function(t){e.push.apply(e,Object(J["a"])(Object.keys(Y).map((function(e){return e+t}))))},n=C;n<j;n++)t(n);return e}var Q=Object(J["a"])(Z());function ee(e){var t=parseInt(e.charAt(e.length-1)),n=Object.keys(Y).indexOf(e.substring(0,e.length-1)),i=12*(t+1)+n;return i}function te(e){return Y[e.substring(0,e.length-1)]}var ne=Object(U["a"])("sequence"),ie=ne.mapActions,re={props:{pitch:{type:String,required:!0},keyType:{type:String,required:!0},index:{type:Number,required:!0}},computed:{classes:function(){return{"black-key":"black"===this.keyType,"white-key":"white"===this.keyType}},caption:function(){return/C[0-9]/.test(this.pitch)?this.pitch:""},keyDimensions:function(){return"white"===this.keyType?{height:12*x/7+"px",top:this.index*x+"px",width:S+"px"}:{height:x+"px",top:this.index*x+"px",width:S-20+"px"}}},methods:Object(K["a"])(Object(K["a"])({},ie(["startPreview","finishPreview"])),{},{mousedown:function(){window.addEventListener("mouseup",this.mouseup),this.startPreview({keyNumber:ee(this.pitch)})},mouseup:function(){window.removeEventListener("mouseup",this.mouseup),this.finishPreview()}})},ae=re,oe=(n("f05a"),Object(p["a"])(ae,z,H,!1,null,"89fcedba",null)),se=oe.exports,ce=Object(U["a"])("sequence"),ue=ce.mapState,le={components:{Key:se},data:function(){return{keys:Q.map((function(e){return{type:te(e),name:e}})).reverse()}},computed:ue(["scrollTopPosition"]),watch:{scrollTopPosition:function(){this.$el.scrollTop=this.scrollTopPosition}}},de=le,pe=(n("16f9"),Object(p["a"])(de,G,W,!1,null,"077334b7",null)),he=pe.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"scoreContainer",staticClass:"score",on:{scroll:e.onScroll}},[n("div",{staticClass:"inner",style:{width:e.width}},[n("div",{staticClass:"grid",style:{opacity:e.gridOpacity}},[e._l(e.keys,(function(e,t){return n("score-row",{key:t+"-key",attrs:{keyNumber:e.number,keyType:e.type}})})),e._l(e.notes,(function(e,t){return n("note",{key:t+"-note",attrs:{index:t,track:e.track,storeKeyNumber:e.key,storeTiming:e.timing,storeLength:e.length}})})),e._l(e.origNotes,(function(e,t){return n("orig-note",{key:t+"-orig-note",attrs:{index:t,track:e.track,storeKeyNumber:e.key,storeTiming:e.timing,storeLength:e.length}})})),e._l(e.beats,(function(e,t){return n("score-line",{key:t+"-beat",attrs:{index:t}})}))],2),n("div",{staticClass:"grid-controls"},[n("progress-line",{key:"progress-line"}),n("seed-line",{key:"seed-line"}),n("mask-start-line",{key:"mask-start-line"}),n("mask-end-line",{key:"mask-end-line"})],1)])])},me=[],ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"score-row",class:e.classes,style:{height:e.height},on:{click:e.handleClick}})},ve=[];n("ac1f"),n("1276");function be(e,t){var n=e/T,i=n%t;return n-i+(i>t/2?t:0)}function ye(e){return e*T}function we(e,t){return 60*e/t}function ke(e,t){return e*t/60}function _e(e){var t=12*(C+1),n=e;return(n-t)*x}var Te=Object(U["a"])("sequence"),xe=Te.mapActions,Se=Te.mapMutations,Oe=Te.mapState,Ce={props:{keyNumber:{type:Number,required:!0},keyType:{type:String,required:!0}},data:function(){return{height:"".concat(x,"px"),clickCount:0,clickTimer:null,delay:250}},computed:Object(K["a"])(Object(K["a"])({},Oe(["currentLength","appState","currentTrack"])),{},{classes:function(){return{"black-score":"black"===this.keyType,"white-score":"white"===this.keyType}}}),methods:Object(K["a"])(Object(K["a"])(Object(K["a"])({},xe(["addNote","startEditingScore","finishEditingScore","startPreview"])),Se(["updatePlayOffset"])),{},{handleClick:function(e){var t=this;e.preventDefault(),this.clickCount++,1===this.clickCount?this.clickTimer=setTimeout((function(){t.clickCount=0,t.seek(e)}),this.delay):2===this.clickCount&&(clearTimeout(this.clickTimer),this.clickCount=0,this.add(e))},add:function(e){if("playing"!==this.appState){var t=T/2;this.addNote({key:this.keyNumber,timing:be(e.offsetX-t,this.currentLength.value),length:this.currentLength.value,track:this.currentTrack}),this.startPreview({keyNumber:this.keyNumber,timeout:2})}},seek:function(e){var t=be(e.offsetX,this.currentLength.value);this.updatePlayOffset(t)}})},je=Ce,Le=(n("5718"),Object(p["a"])(je,ge,ve,!1,null,"29b814c6",null)),Ne=Le.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note",style:{bottom:e.bottom,left:e.left,width:e.width,height:e.height,opacity:e.opacity},on:{mousedown:e.startMoving,dblclick:e.remove}},[n("div",{staticClass:"note-color",class:e.noteColor}),n("div",{staticClass:"selection begin",class:e.noteColor,on:{mousedown:function(t){return t.stopPropagation(),e.startEditingStartTime(t)}}}),n("div",{staticClass:"selection end",class:e.noteColor,on:{mousedown:function(t){return t.stopPropagation(),e.startEditingEndTime(t)}}})])},Pe=[];function Ee(e,t,n){return e>=0&&n>=12*C&&n<=12*(j+1)}var qe,De,Re,Ie,Ae,Be,$e,Fe,Ke=Object(U["a"])("sequence"),Ve=Ke.mapActions,Xe=Ke.mapState,Ge=Object(U["a"])("predict"),We=Ge.mapState,ze={props:{index:{type:Number,required:!0},track:{type:Number,required:!0},storeKeyNumber:{type:Number,required:!0},storeTiming:{type:Number,required:!0},storeLength:{type:Number,required:!0}},data:function(){return{state:"normal",height:"".concat(x,"px"),editLength:this.storeLength,editTiming:this.storeTiming,editKeyNumber:this.storeKeyNumber,movingOffsetX:0,movingFirstY:0}},computed:Object(K["a"])(Object(K["a"])(Object(K["a"])(Object(K["a"])({},Xe({minimumUnit:function(e){return e.currentLength.value}})),Xe(["progressTime","appState","version","playbackVersion"])),We(["seedLen","maskStart","maskEnd","predictionType"])),{},{bottom:function(){return"normal"===this.state?"".concat(_e(this.storeKeyNumber),"px"):"".concat(_e(this.editKeyNumber),"px")},left:function(){return"normal"===this.state?"".concat(ye(this.storeTiming),"px"):"".concat(ye(this.editTiming),"px")},width:function(){return"normal"===this.state?"".concat(ye(this.storeLength),"px"):"".concat(ye(this.editLength),"px")},opacity:function(){return"original"===this.playbackVersion?.2:.8},noteColor:function(){var e=this._.round(this.storeTiming,3),t=this.predictionType,n=t.name,i=t.track;if("playing"===this.appState){var r=e<this.progressTime&&e+this.storeLength>this.progressTime;if(r&&"original"!==this.playbackVersion)return"note-playing"}return 0===this.storeLength?"note-delete":["rhythm","pitch"].includes(n)?e>=this.maskStart&&e<this.maskEnd?"note-".concat(n):"note-default":["melody","chords"].includes(n)&&this.track!==i?"note-default":e>=this.seedLen?"note-predict":"note-default"},scoreLeftOffset:function(){return this.$el.parentNode.parentNode.scrollLeft-this.$el.parentNode.parentNode.getBoundingClientRect().left},scrollLeft:function(){return this.$el.parentNode.parentNode.scrollLeft},scrollTop:function(){return this.$el.parentNode.parentNode.scrollTop}}),watch:{version:function(){this.reload()},state:function(){this.reload()}},methods:Object(K["a"])(Object(K["a"])({},Ve(["updateNoteLength","updateNoteTiming","updateNoteKeyNumber","removeNote","startPreview"])),{},{reload:function(){this.editLength=this.storeLength,this.editTiming=this.storeTiming,this.editKeyNumber=this.storeKeyNumber},remove:function(){this.removeNote(this.index)},addListeners:function(){window.addEventListener("mousemove",this.updateEditing),window.addEventListener("mouseup",this.finishEditing)},removeListeners:function(){window.removeEventListener("mousemove",this.updateEditing),window.removeEventListener("mouseup",this.finishEditing)},startMoving:function(e){this.addListeners(),this.state="moving",this.movingOffsetX=e.offsetX,this.movingFirstY=e.clientY+this.scrollTop},startEditingEndTime:function(){this.addListeners(),this.state="editing-end-time"},startEditingStartTime:function(){this.addListeners(),this.state="editing-start-time"},updateEditing:function(e){var t=this.editTiming,n=this.editLength,i=this.editKeyNumber;switch(this.state){case"editing-end-time":n=be(e.clientX+this.scoreLeftOffset,_.value)-this.editTiming;break;case"moving":t=be(e.clientX+this.scoreLeftOffset-this.movingOffsetX,_.value),i=this.storeKeyNumber+Math.round((this.movingFirstY-(e.clientY+this.scrollTop))/x),this.editKeyNumber!==i&&this.startPreview({keyNumber:i,timeout:2});break;case"editing-start-time":t=be(e.clientX+this.scoreLeftOffset,_.value),n=this.storeLength+this.storeTiming-t;break}Ee(t,n,i)&&(this.editTiming=t,this.editLength=n,this.editKeyNumber=i)},finishEditing:function(){this.removeListeners(),this.editLength<=0?this.removeNote(this.index):(this.state="normal",this.movingFirstY=0,this.movingOffsetX=0,this.storeLength!==this.editLength&&this.updateNoteLength({index:this.index,length:this.editLength}),this.storeTiming!==this.editTiming&&this.updateNoteTiming({index:this.index,timing:this.editTiming}),this.storeKeyNumber!==this.editKeyNumber&&this.updateNoteKeyNumber({index:this.index,keyNumber:this.editKeyNumber}))}})},He=ze,Ue=(n("fd6c"),Object(p["a"])(He,Me,Pe,!1,null,"37d4b7d8",null)),Je=Ue.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note-previous",style:{bottom:e.bottom,left:e.left,width:e.width,display:e.display}})},Ze=[],Qe=Object(U["a"])("predict"),et=Qe.mapState,tt={props:{index:{type:Number,required:!0},storeKeyNumber:{type:Number,required:!0},storeTiming:{type:Number,required:!0},storeLength:{type:Number,required:!0}},data:function(){return{state:"normal",length:this.storeLength,timing:this.storeTiming,keyNumber:this.storeKeyNumber}},computed:Object(K["a"])(Object(K["a"])({},et(["seedLen"])),{},{bottom:function(){return"".concat(_e(this.storeKeyNumber)+2,"px")},left:function(){return"".concat(ye(this.storeTiming),"px")},width:function(){return"".concat(ye(this.storeLength),"px")},display:function(){return this._.round(this.storeTiming,3)>=this.seedLen?"block":"none"}})},nt=tt,it=(n("53f0"),Object(p["a"])(nt,Ye,Ze,!1,null,"46901111",null)),rt=it.exports,at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note-original",style:{bottom:e.bottom,left:e.left,width:e.width,display:e.display,opacity:e.opacity,filter:e.filter}})},ot=[],st=Object(U["a"])("predict"),ct=st.mapState,ut=Object(U["a"])("sequence"),lt=ut.mapState,dt={props:{index:{type:Number,required:!0},storeKeyNumber:{type:Number,required:!0},storeTiming:{type:Number,required:!0},storeLength:{type:Number,required:!0}},data:function(){return{state:"normal",length:this.storeLength,timing:this.storeTiming,keyNumber:this.storeKeyNumber}},computed:Object(K["a"])(Object(K["a"])(Object(K["a"])({},ct(["seedLen"])),lt(["playbackVersion","appState","progressTime"])),{},{bottom:function(){return"".concat(_e(this.storeKeyNumber)+2,"px")},left:function(){return"".concat(ye(this.storeTiming),"px")},width:function(){return"".concat(ye(this.storeLength),"px")},display:function(){return"block"},filter:function(){if("playing"===this.appState){var e=this._.round(this.storeTiming,3),t=e<this.progressTime&&e+this.storeLength>this.progressTime;if(t&&"original"===this.playbackVersion)return"brightness(50%)"}return"none"},opacity:function(){return"original"===this.playbackVersion?.8:.3}})},pt=dt,ht=(n("db2f"),Object(p["a"])(pt,at,ot,!1,null,"51393107",null)),ft=ht.exports,mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{left:e.left,"border-left-color":e.borderColor}})},gt=[],vt={props:{index:{type:Number,required:!0}},computed:{left:function(){return"".concat(this.index*T,"px")},borderColor:function(){return this.index%4===0?"rgb(95, 95, 95)":"#bbdefb"}}},bt=vt,yt=(n("e6f4"),Object(p["a"])(bt,mt,gt,!1,null,"50aba446",null)),wt=yt.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"draggable-line",style:{left:e.left,visibility:e.visibility},attrs:{id:e.divID},on:{mousedown:e.beginEditing}})},_t=[],Tt={props:{},data:function(){return{divID:"draggable-line"}},computed:{offset:function(){return 0},beat:{set:function(e){},get:function(){return 0}},left:function(){return"".concat(this.beat*T+this.offset,"px")},hidden:function(){return!1},visibility:function(){return this.hidden?"hidden":"visible"}},methods:{moveLine:function(e){var t=1,n=this.$el.parentNode.parentNode.getBoundingClientRect().left,i=be(e.clientX-n,t);i<0&&(i=0),this.beat=i},beginEditing:function(e){this.addListeners()},addListeners:function(){window.addEventListener("mousemove",this.moveLine),window.addEventListener("mouseup",this.finishEditing)},removeListeners:function(){window.removeEventListener("mousemove",this.moveLine),window.removeEventListener("mouseup",this.finishEditing)},finishEditing:function(){this.removeListeners()}}},xt=Tt,St=(n("9ce8"),Object(p["a"])(xt,kt,_t,!1,null,null,null)),Ot=St.exports,Ct=Object(U["a"])("sequence"),jt=Ct.mapState,Lt=Ct.mapMutations,Nt={extends:Ot,data:function(){return{divID:"progress-line"}},computed:Object(K["a"])(Object(K["a"])({},jt(["progressTime","playOffset","appState"])),{},{offset:function(){return this.beat<=0?2:0},beat:{set:function(e){this.updatePlayOffset(e)},get:function(){return"editing"===this.appState?this.playOffset:this.progressTime}}}),methods:Object(K["a"])({},Lt(["updatePlayOffset"]))},Mt=Nt,Pt=(n("3472"),Object(p["a"])(Mt,qe,De,!1,null,"6bff2918",null)),Et=Pt.exports,qt=Object(U["a"])("predict"),Dt=qt.mapState,Rt=qt.mapMutations,It={extends:Ot,props:{},data:function(){return{divID:"seed-line"}},computed:Object(K["a"])(Object(K["a"])({},Dt(["seedLen","predictionType"])),{},{offset:function(){return this.beat<=0?2:-4},hidden:function(){return["pitch","rhythm"].includes(this.predictionType.name)},beat:{set:function(e){this.updateSeedLen(e)},get:function(){return this.seedLen}}}),methods:Object(K["a"])({},Rt(["updateSeedLen"]))},At=It,Bt=(n("0c43"),Object(p["a"])(At,Re,Ie,!1,null,"25ff7860",null)),$t=Bt.exports,Ft=Object(U["a"])("predict"),Kt=Ft.mapState,Vt=Ft.mapMutations,Xt={extends:Ot,data:function(){return{divID:"mask-start-line"}},computed:Object(K["a"])(Object(K["a"])({},Kt(["maskStart","maskEnd","predictionType"])),{},{offset:function(){return this.beat<=0?2:-4},hidden:function(){return null===this.maskStart||!["pitch","rhythm"].includes(this.predictionType.name)},beat:{set:function(e){e<this.maskEnd&&this.updateMaskStart(e)},get:function(){return this.maskStart}}}),methods:Object(K["a"])({},Vt(["updateMaskStart"]))},Gt=Xt,Wt=(n("b8a0"),Object(p["a"])(Gt,Ae,Be,!1,null,"30acfff8",null)),zt=Wt.exports,Ht=Object(U["a"])("predict"),Ut=Ht.mapState,Jt=Ht.mapMutations,Yt={extends:Ot,data:function(){return{divID:"mask-end-line"}},computed:Object(K["a"])(Object(K["a"])({},Ut(["maskStart","maskEnd","predictionType"])),{},{offset:function(){return this.beat<=0?2:-4},hidden:function(){return null===this.maskEnd||!["pitch","rhythm"].includes(this.predictionType.name)},beat:{set:function(e){e>this.maskStart&&this.updateMaskEnd(e)},get:function(){return this.maskEnd}}}),methods:Object(K["a"])({},Jt(["updateMaskEnd"]))},Zt=Yt,Qt=(n("817c"),Object(p["a"])(Zt,$e,Fe,!1,null,"39d7288a",null)),en=Qt.exports,tn=Object(U["a"])("sequence"),nn=tn.mapActions,rn=tn.mapState,an=tn.mapGetters,on={components:{ScoreRow:Ne,PrevNote:rt,OrigNote:ft,Note:Je,ScoreLine:wt,ProgressLine:Et,SeedLine:$t,MaskStartLine:zt,MaskEndLine:en},props:{gridOpacity:{type:Number,default:1}},data:function(){return{keys:Q.map((function(e){return{type:te(e),number:ee(e)}})).reverse(),scoreScrollLeft:0,scoreRect:{left:0,top:0,right:0,bottom:0}}},computed:Object(K["a"])(Object(K["a"])(Object(K["a"])({},rn(["notes","prevNotes","origNotes"])),an(["scoreLength"])),{},{beats:function(){return console.log("Beats",this.scoreLength),Array(Math.ceil(this.scoreLength))},width:function(){return"".concat(this.scoreLength*T,"px")},scoreLeftOffset:function(){return this.scoreScrollLeft-this.scoreRect.left}}),mounted:function(){this.scoreRect=this.$el.getBoundingClientRect(),window.addEventListener("resize",this.onResize)},methods:Object(K["a"])(Object(K["a"])({},nn(["scrollLeft"])),{},{onScroll:function(){this.scoreScrollLeft=this.$el.scrollLeft,this.scrollLeft(this.scoreScrollLeft)},onResize:function(){this.scoreRect=this.$el.getBoundingClientRect()}})},sn=on,cn=(n("d27a"),Object(p["a"])(sn,fe,me,!1,null,"9b3ebe7c",null)),un=cn.exports,ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{id:e.buttonID,color:"blue darken-2",dark:"",fab:"",large:""},on:{click:e.toggle}},i),[n("v-icon",[e._v(e._s(e.icon))])],1)]}}])},[n("div",[e._v("Play it back!")])])},dn=[],pn=Object(U["a"])("sequence"),hn=pn.mapActions,fn=pn.mapState,mn=Object(U["a"])("predict"),gn=mn.mapMutations,vn={props:{buttonID:{type:String,required:!0}},computed:Object(K["a"])(Object(K["a"])({},fn(["appState"])),{},{icon:function(){return"playing"===this.appState?"stop":"play_arrow"}}),methods:Object(K["a"])(Object(K["a"])(Object(K["a"])({},hn(["play","stop"])),gn(["updateTutorialStep"])),{},{toggle:function(){this.updateTutorialStep(2),"editing"===this.appState?this.play():this.stop()}})},bn=vn,yn=Object(p["a"])(bn,ln,dn,!1,null,null,null),wn=yn.exports,kn=Object(U["a"])("predict"),_n=kn.mapState,Tn={name:"Sequencer",components:{Keyboard:he,Score:un,PlayButton:wn},computed:Object(K["a"])(Object(K["a"])({},_n(["tutorialStep"])),{},{gridOpacity:function(){return 1!==this.tutorialStep?1:.4}}),mounted:function(){this.scrollBottom()},methods:{scrollBottom:function(){var e=this.$refs.scrollSection;e.scrollTop=e.scrollHeight}}},xn=Tn,Sn=(n("bae4"),n("dbef"),Object(p["a"])(xn,V,X,!1,null,"1e217949",null)),On=Sn.exports,Cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-controls"},[n("search-table",{staticClass:"header-container"}),n("span",{ref:"editableTitle",staticClass:"header-container",attrs:{id:"sequence-title",contenteditable:"true"},on:{blur:function(t){return e.updateSeqName(t.target.textContent)}}}),n("div",{staticClass:"header-container"},[n("v-btn",{attrs:{outlined:"",small:"",color:"green lighten-1"},on:{click:e.exportMidi}},[e._v("Save")]),n("v-btn",{attrs:{outlined:"",small:"",color:"green lighten-1"},on:{click:e.share}},[e._v("Share")])],1),this.origNotes.length>0?n("div",{staticClass:"playback-version"},[n("v-btn-toggle",{staticClass:"control-group-toggle",model:{value:e.selectPlaybackVersion,callback:function(t){e.selectPlaybackVersion=t},expression:"selectPlaybackVersion"}},[n("v-btn",{attrs:{text:"",value:"prediction",color:"red"}},[e._v("Prediction")]),n("v-btn",{attrs:{text:"",value:"original",color:"green"}},[e._v("Original")])],1)],1):e._e()],1)},jn=[],Ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-btn",{attrs:{outlined:"",small:"",color:"green lighten-1"},on:{click:function(t){e.showDialog=!0}}},[e._v(" New Song... ")]),e._.isEmpty(e.sid)?e._e():n("v-btn",{attrs:{outlined:"",small:"",color:"green lighten-1"},on:{click:e.restart}},[e._v(" Restart ")]),n("v-dialog",{attrs:{"max-width":"1000px"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[n("v-card",[n("v-card-title",[n("v-text-field",{attrs:{"append-icon":"search",label:e.searchLabel,"single-line":"","hide-details":""},model:{value:e.searchResults,callback:function(t){e.searchResults=t},expression:"searchResults"}}),n("v-spacer"),n("v-btn",{attrs:{outlined:"",small:"",color:"green lighten-1"},on:{click:e.shuffle}},[e._v(" Shuffle "),n("v-icon",[e._v("shuffle")])],1),n("v-btn",{attrs:{outlined:"",small:"",color:"green lighten-1"},on:{click:function(t){return e.$refs.fileUpload.click()}}},[e._v(" Import "),n("v-icon",[e._v("folder")]),n("input",{ref:"fileUpload",attrs:{id:"fileUpload",type:"file",hidden:""},on:{change:function(t){return e.loadLocalFile(t)}}})],1),n("v-btn",{attrs:{outlined:"",small:"",color:"green lighten-1"},on:{click:e.blankSheet}},[e._v(" Blank "),n("v-icon",[e._v("create_new_folder")])],1)],1),n("v-data-table",{attrs:{headers:e.headers,items:e.results},on:{"click:row":e.selectSong},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",{staticClass:"text-xs-left"},[e._v(" "+e._s(t.item.title)+" ")]),n("td",{staticClass:"text-xs-left"},[e._v(" "+e._s(t.item.artist)+" ")]),n("td",{staticClass:"text-xs-right"},[e._v(" "+e._s(t.item.section)+" ")])])]}},{key:"no-results",fn:function(){return[n("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v(' Your search for "'+e._s(e.term)+'" found no results. ')])]},proxy:!0}])})],1)],1)],1)},Nn=[],Mn=(n("841c"),n("96cf"),n("1da1")),Pn=n("6062"),En=n("5118"),qn=Object(U["a"])("predict"),Dn=qn.mapActions,Rn=qn.mapState,In=qn.mapMutations,An=Object(U["a"])("sequence"),Bn=An.mapActions,$n={name:"SearchTable",props:{searchLabel:{type:String,default:"Choose a song..."}},data:function(){return{results:[],fuse:null,term:null,debounce:null,error:"",showDialog:!1,headers:[{text:"Title",align:"left",value:"title",width:"50%"},{text:"Artist",width:"30%",align:"left",value:"artist"},{text:"Section",width:"20%",align:"right",value:"section"}]}},computed:Object(K["a"])(Object(K["a"])({},Rn(["songs","sid"])),{},{searchResults:{set:function(e){null!==this.debounce&&this.debounce(e)},get:function(){return null}}}),watch:{songs:function(){this.loadSearch()}},mounted:function(){this.fetchSongs()},methods:Object(K["a"])(Object(K["a"])(Object(K["a"])(Object(K["a"])({},Dn(["fetchSongs","saveMidi"])),Bn(["loadMidiBuffer","clear"])),In(["updateSID"])),{},{loadSearch:function(){if(!this._.isEmpty(this.songs)&&null===this.fuse){var e={shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["artist","title"]};this.fuse=new Pn["a"](this.songs,e),this.debounce=this._.debounce(this.updateSearch,100),this.results=this.songs}},blankSheet:function(){this.$router.push({path:"/song/blank"}),this.showDialog=!1},restart:function(){this.$router.push({path:"/song/".concat(this.sid)})},shuffle:function(){this.$router.push({path:"/shuffle"}),this.showDialog=!1},selectSong:function(e){this.$router.push({path:"/song/".concat(e.sid)}),this.showDialog=!1},updateSearch:function(e){var t=this;null===this.fuse||this._.isEmpty(e)||this._.isEmpty(this.songs)||Object(En["setTimeout"])((function(){t.results=t.fuse.search(e,{limit:50})}),0)},loadLocalFile:function(e){var t=this;return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t._.get(e,"target.files[0]"),r=t._.get(i,"name","").split("."),a=r.pop(),"mid"===a){n.next=6;break}return console.log("Error loading file",i),n.abrupt("return");case 6:t.clear(),o=new FileReader,o.fileName=r[0],o.onload=function(e){return t.loadMidiBuffer({midiBuffer:e.target.result,seqName:e.target.fileName,savePrevious:!1})},o.readAsArrayBuffer(i),Object(En["setTimeout"])(Object(Mn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.saveMidi();case 2:n=e.sent,t.updateSID(n),t.$router.push({path:"/song/".concat(n)}),t.showDialog=!1;case 6:case"end":return e.stop()}}),e)}))),1e3);case 12:case"end":return n.stop()}}),n)})))()}})},Fn=$n,Kn=(n("462b"),Object(p["a"])(Fn,Ln,Nn,!1,null,"7ee929be",null)),Vn=Kn.exports,Xn=Object(U["a"])("sequence"),Gn=Xn.mapActions,Wn=Xn.mapState,zn={name:"HeaderControls",components:{SearchTable:Vn},data:function(){return{}},computed:Object(K["a"])(Object(K["a"])({},Wn(["playbackVersion","seqName","origNotes"])),{},{selectPlaybackVersion:{set:function(e){this.updatePlaybackVersion({playbackVersion:e})},get:function(){return this.playbackVersion}}}),watch:{seqName:function(e){console.log("Seq name changed:",e),this.$refs.editableTitle.textContent=e}},methods:Object(K["a"])(Object(K["a"])({},Gn(["exportMidi","clear","updatePlaybackVersion","updateSeqName"])),{},{share:function(){var e=window.location.href,t="Check out this song I just generated with #musicautobot @bearpelican";window.open("http://twitter.com/share?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t),"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0")}})},Hn=zn,Un=(n("282c"),Object(p["a"])(Hn,Cn,jn,!1,null,"73a5b86e",null)),Jn=Un.exports,Yn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer-controls"},[n("sequence-controls",{attrs:{id:"sequence-controls"}}),n("regen-controls",{attrs:{id:"regen-controls"}}),n("predict-controls",{attrs:{id:"predict-controls"}})],1)},Zn=[],Qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-group"},[n("div",{staticClass:"control-group-header"},[e._v(" Playback Controls ")]),n("div",{staticClass:"control-group-content"},[n("div",{staticClass:"control-group-control"},[n("div",{staticClass:"control-group-label"},[e._v(" BPM: "+e._s(e.bpm)+" ")]),n("v-slider",{staticClass:"control-group-slider",attrs:{id:"bpm",color:"blue",min:60,max:200,step:1,"hide-details":""},model:{value:e.selectBPM,callback:function(t){e.selectBPM=t},expression:"selectBPM"}})],1),n("div",{staticClass:"control-group-control"},[n("div",{staticClass:"control-group-label"},[e._v(" Instrument ")]),n("v-btn-toggle",{staticClass:"control-group-toggle",model:{value:e.selectInstrumentType,callback:function(t){e.selectInstrumentType=t},expression:"selectInstrumentType"}},[n("v-btn",{attrs:{text:"",value:"piano"}},[e._v(" Piano ")]),n("v-btn",{attrs:{text:"",value:"synth"}},[e._v(" Synth ")])],1)],1)])])},ei=[],ti=Object(U["a"])("sequence"),ni=ti.mapActions,ii=ti.mapState,ri={data:function(){return{}},computed:Object(K["a"])(Object(K["a"])({},ii(["appState","bpm","instrumentType","progressTime"])),{},{icon:function(){return"playing"===this.appState?"stop":"play_arrow"},selectBPM:{set:function(e){this.updateBPM(e)},get:function(){return this.bpm}},selectInstrumentType:{set:function(e){this.updateInstrumentType({instrumentType:e})},get:function(){return this.instrumentType}}}),methods:Object(K["a"])(Object(K["a"])({},ni(["play","stop","updateBPM","updateInstrumentType"])),{},{toggle:function(){"editing"===this.appState?this.play():this.stop()}})},ai=ri,oi=(n("f892"),Object(p["a"])(ai,Qn,ei,!1,null,"b1221564",null)),si=oi.exports,ci=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"control-group"},[n("v-btn-toggle",{staticClass:"control-group-toggle",attrs:{mandatory:""},model:{value:e.selectPredictionType,callback:function(t){e.selectPredictionType=t},expression:"selectPredictionType"}},e._l(e.predictionTypes,(function(t){return n("v-btn",{key:t.name,attrs:{text:"",value:t,color:"red"}},[e._v(" "+e._s(t.displayName)+" ")])})),1),n("label",{attrs:{id:"prediction-type-hint"}},[e._v(" "+e._s(e.predictionType.description)+" ")])],1)])},ui=[],li=Object(U["a"])("predict"),di=li.mapMutations,pi=li.mapState,hi={name:"RegenControls",data:function(){return{error:"",predictionTypes:L}},computed:Object(K["a"])(Object(K["a"])({},pi(["predictionType"])),{},{noteTempPCT:function(){return parseInt((this.noteTemp-.7)/.9*100)},durationTempPCT:function(){return parseInt((this.durationTemp-.3)/.7*100)},selectPredictionType:{set:function(e){this.updatePredictionType(e)},get:function(){return this.predictionType}}}),methods:Object(K["a"])({},di(["updatePredictionType"]))},fi=hi,mi=(n("136d"),Object(p["a"])(fi,ci,ui,!1,null,"445381d5",null)),gi=mi.exports,vi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-group"},[n("div",{staticClass:"control-group-header"},[e._v(" Creativity ")]),n("div",{staticClass:"control-group-content"},[n("div",{staticClass:"control-group-control"},[n("div",{staticClass:"control-group-label"},[e._v(" Pitch: "+e._s(e.noteTempPCT)+"% ")]),n("v-slider",{staticClass:"control-group-slider",attrs:{id:"noteTemp",color:"red",type:"range",min:.1,max:2.1,step:.05,"hide-details":""},model:{value:e.selectNoteTemp,callback:function(t){e.selectNoteTemp=t},expression:"selectNoteTemp"}})],1),n("div",{staticClass:"control-group-control"},[n("div",{staticClass:"control-group-label"},[e._v(" Rhythm: "+e._s(e.durationTempPCT)+"% ")]),n("v-slider",{staticClass:"control-group-slider",attrs:{id:"durTemp",color:"red",type:"range",min:.1,max:2.1,step:.05,"hide-details":""},model:{value:e.selectDurationTemp,callback:function(t){e.selectDurationTemp=t},expression:"selectDurationTemp"}})],1)])])},bi=[],yi=Object(U["a"])("predict"),wi=yi.mapMutations,ki=yi.mapState,_i={name:"PredictControls",data:function(){return{error:""}},computed:Object(K["a"])(Object(K["a"])({},ki(["nSteps","seedLen","durationTemp","noteTemp"])),{},{selectNoteTemp:{set:function(e){this.updateNoteTemp(e)},get:function(){return this.noteTemp}},selectDurationTemp:{set:function(e){this.updateDurationTemp(e)},get:function(){return this.durationTemp}},noteTempPCT:function(){return parseInt((this.noteTemp-.1)/2*100)},durationTempPCT:function(){return parseInt((this.durationTemp-.1)/2*100)}}),methods:Object(K["a"])({},wi(["updateSteps","updateSeedLen","updateNoteTemp","updateDurationTemp"]))},Ti=_i,xi=(n("b3b8"),Object(p["a"])(Ti,vi,bi,!1,null,"3e2afc16",null)),Si=xi.exports,Oi={components:{SequenceControls:si,RegenControls:gi,PredictControls:Si}},Ci=Oi,ji=(n("4fbf"),Object(p["a"])(Ci,Yn,Zn,!1,null,null,null)),Li=ji.exports,Ni=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({style:{left:e.left},attrs:{id:"generate-button",color:"red darken-2",dark:"",large:"",fab:""},on:{click:e.predict}},i),[n("v-icon",{attrs:{id:"generate-icon"}},[e._v("cached")])],1)]}}]),model:{value:e.showTooltip,callback:function(t){e.showTooltip=t},expression:"showTooltip"}},[n("div",[e._v("Click to remix!")])])},Mi=[],Pi=Object(U["a"])("predict"),Ei=Pi.mapState,qi=Pi.mapActions,Di=Object(U["a"])("sequence"),Ri=Di.mapState,Ii={data:function(){return{parentNode:null,showTooltip:!1}},computed:Object(K["a"])(Object(K["a"])(Object(K["a"])({},Ei(["seedLen","maskStart","predictionType"])),Ri(["scrollLeftPosition"])),{},{beat:function(){var e=this._.get(this.predictionType,"name");return["pitch","rhythm"].includes(e)?this.maskStart:this.seedLen},left:function(){var e=this.beat*T,t=50,n=e-this.scrollLeftPosition+S,i=0;if(null!==this.parentNode){var r=this.parentNode.getBoundingClientRect();i=r.right-r.left}return n<t+S?n=t+S:n>i-t&&(n=i-t),"".concat(n,"px")}}),mounted:function(){var e=this;this.parentNode=this.$el.parentNode,setTimeout((function(){e.showTooltip=!0,setTimeout((function(){e.showTooltip=!1}),8e3)}),1e3)},methods:Object(K["a"])(Object(K["a"])({},qi(["predictMidi"])),{},{predict:function(){var e=this;return Object(Mn["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showTooltip=!1,t.next=3,e.predictMidi();case 3:n=t.sent,n&&e.$router.push({path:"/predict/".concat(n)});case 5:case"end":return t.stop()}}),t)})))()}})},Ai=Ii,Bi=(n("e1d9"),Object(p["a"])(Ai,Ni,Mi,!1,null,"0582e126",null)),$i=Bi.exports,Fi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loading-outer"},[n("div",{staticClass:"loading-inner"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"green accent-3",size:40}}),n("label",[e._v(e._s(e.value))]),n("v-progress-circular",{attrs:{indeterminate:"",color:"green accent-3",size:40}})],1)])},Ki=[],Vi={props:{value:{type:String,default:null}},computed:{}},Xi=Vi,Gi=(n("b9eb"),Object(p["a"])(Xi,Fi,Ki,!1,null,"751bd5db",null)),Wi=Gi.exports,zi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tutorial-start"},[n("svg",{staticStyle:{"enable-background":"new 0 0 43.1 85.9"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 43.1 85.9","xml:space":"preserve"}},[n("path",{staticClass:"st0 draw-arrow",attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.3,2.5c-5.8,5-8.7,12.7-9,20.3s2,15.1,5.3,22c6.7,14,18,25.8,31.7,33.1"}}),n("path",{staticClass:"draw-arrow tail-1",attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M40.6,78.1C39,71.3,37.2,64.6,35.2,58"}}),n("path",{staticClass:"draw-arrow tail-2",attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M39.8,78.5c-7.2,1.7-14.3,3.3-21.5,4.9"}})]),e._m(0)])},Hi=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tutorial-text"},[n("p",{staticClass:"tutorial-header"},[e._v(" Choose a song to start. ")]),n("p",{staticClass:"tutorial-p"},[e._v(" We'll use this to generate new music in the same style! ")])])}],Ui={},Ji=Ui,Yi=(n("6912"),Object(p["a"])(Ji,zi,Hi,!1,null,"de972594",null)),Zi=Yi.exports,Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tutorial-two",on:{click:e.dismiss}},[n("svg",{staticClass:"arrow-play",staticStyle:{"enable-background":"new 0 0 43.1 85.9"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 43.1 85.9","xml:space":"preserve"}},[n("path",{staticClass:"st0 draw-arrow",attrs:{id:"ap","stroke-linecap":"round","stroke-linejoin":"round",d:"M11.3,2.5c-5.8,5-8.7,12.7-9,20.3s2,15.1,5.3,22c6.7,14,18,25.8,31.7,33.1"}}),n("path",{staticClass:"draw-arrow tail-1",attrs:{id:"ap-t1","stroke-linecap":"round","stroke-linejoin":"round",d:"M40.6,78.1C39,71.3,37.2,64.6,35.2,58"}}),n("path",{staticClass:"draw-arrow tail-2",attrs:{id:"ap-t2","stroke-linecap":"round","stroke-linejoin":"round",d:"M39.8,78.5c-7.2,1.7-14.3,3.3-21.5,4.9"}})]),n("svg",{staticClass:"arrow-generate",staticStyle:{"enable-background":"new 0 0 120 100"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 120 100","xml:space":"preserve"}},[n("path",{staticClass:"st0 draw-arrow",attrs:{id:"ag",stroke:"null",d:"m11.076091,12.500004c56.035746,-3.602122 67.399242,0.71061 74.550715,17.915384c0.297942,1.864719 6.050072,27.60371 4.645055,63.484612","stroke-linejoin":"round","stroke-linecap":"round"}}),n("path",{staticClass:"draw-arrow tail-1",attrs:{id:"ag-t1",d:"m91.6,95.1c6.4,-7.8 8.6,-9.5 12.6,-14.1","stroke-linejoin":"round","stroke-linecap":"round"}}),n("path",{staticClass:"draw-arrow tail-2",attrs:{id:"ag-t2",stroke:"null",d:"m89.8,95.5c-7.2,-5.3 -10.3,-10.7 -14.5,-13.1","stroke-linejoin":"round","stroke-linecap":"round"}})]),e._m(0),n("p",{attrs:{id:"tutorial-play"}},[e._v(" Play it back here! ")])])},er=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"tutorial-generate"}},[n("p",[e._v("Time to generate new music!")]),n("p",{attrs:{id:"tutorial-generate-subtext"}},[e._v(" You'll get a new sequence with each time you click ")])])}],tr=Object(U["a"])("predict"),nr=tr.mapMutations,ir={mounted:function(){var e=this;setTimeout((function(){e.updateTutorialStep(2)}),16e3)},methods:Object(K["a"])(Object(K["a"])({},nr(["updateTutorialStep"])),{},{dismiss:function(){this.updateTutorialStep(2)}})},rr=ir,ar=(n("b26c"),Object(p["a"])(rr,Qi,er,!1,null,"303b30e4",null)),or=ar.exports,sr=Object(U["a"])("predict"),cr=sr.mapActions,ur=sr.mapMutations,lr=sr.mapState,dr=Object(U["a"])("sequence"),pr=dr.mapActions,hr={name:"Predict",components:{Sequencer:On,HeaderControls:Jn,FooterControls:Li,GenerateButton:$i,Loading:Wi,Tutorial:Zi,TutorialTwo:or},data:function(){return{error:"",debug:!1}},computed:Object(K["a"])(Object(K["a"])({},lr(["loadingState","tutorialStep"])),{},{sequenceStyle:function(){return{visibility:0!==this.tutorialStep||this.debug?"visible":"hidden"}},loadingStyle:function(){return{display:null!==this.loadingState?"block":"none"}}}),watch:{$route:"fetchData"},created:function(){this.fetchData()},methods:Object(K["a"])(Object(K["a"])(Object(K["a"])(Object(K["a"])({},cr(["loadSong","loadPrediction"])),pr(["clear"])),ur(["updateTutorialStep","updateSeedLen","updateSID"])),{},{fetchData:function(){var e=this.$route.path;console.log("PATHS",e),console.log("params",this.$route.params);var t=this.$route.params.sid,n=this.$route.params.pid;t?"blank"===t?(this.updateSID(null),this.clear()):this.loadSong(t):n&&this.loadPrediction(n)}})},fr=hr,mr=(n("c8cf"),Object(p["a"])(fr,$,F,!1,null,null,null)),gr=mr.exports,vr=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},br=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sheet"},[n("div",{attrs:{id:"sheet-container"}})])}],yr=n("2938"),wr=Object(U["a"])("predict"),kr=wr.mapActions,_r=Object(U["a"])("sequence"),Tr=_r.mapState,xr={name:"Sheet",components:{},data:function(){return console.log(yr["OpenSheetMusicDisplay"]),{osmd:null,containerWidth:720}},computed:Object(K["a"])({},Tr(["notes"])),mounted:function(){console.log(yr["OpenSheetMusicDisplay"]),this.osmd=new yr["OpenSheetMusicDisplay"]("sheet-container",{drawingParameters:"compact",drawPartNames:!1}),this.updateSheet()},methods:Object(K["a"])(Object(K["a"])({},kr(["convertToXML"])),{},{loadSheet:function(e){var t=this;this.osmd.load(e).then((function(){t.containerWidth=900,t.osmd.render()}))},updateSheet:function(){var e=this;return Object(Mn["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e._.isEmpty(e.notes)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.convertToXML();case 4:n=t.sent,e.osmd.load(n).then((function(){e.containerWidth=900,e.osmd.render()}));case 6:case"end":return t.stop()}}),t)})))()}})},Sr=xr,Or=Object(p["a"])(Sr,vr,br,!1,null,null,null),Cr=Or.exports,jr=[{sid:"99c5db9ce936b7a1c5faab57cc3f160c",display:"Call Me Maybe - Carly Rae Jepsen",seedLen:10},{sid:"aeee134e4034e5f98bb630c56d2f7f8c",display:"La Bamba - Ritchie Valen",seedLen:13},{sid:"b4c62f3d11f448db69c4fa15e27e9e8e",display:"Can You Feel The Love Tonight - Elton John",seedLen:14},{sid:"8f10995e036c5f590ca616dee0c9c7d7",display:"Colors Of The Wind - Disney",seedLen:20},{sid:"58890c433f173ba77220274017b8af92",display:"A Thousand Miles - Vanessa Carlton",seedLen:12},{sid:"19762ebd7059dd5f8809f98b2575d8c1",display:"Levels - Avicii",seedLen:12},{sid:"c4d9e72a92f931b2c72e84b6efee4b51",display:"Canon In D Major - Johann Pachelbel",seedLen:12},{sid:"de1fa62a9c209491d4fd81f1d1ceb55e",display:"In The Hall Of the Mountain King - Edvard Grieg",seedLen:12},{sid:"f8b65d3624d9a68e417792ec27de9296",display:"Scary Monsters And Nice Sprites - Skrillex"},{sid:"2ad86f3ecd71b058eac9cc5ceba11db8",display:"I Want You Back - Jackson 5",seedLen:28},{sid:"999e8169b01f59fa28e63b142f35feda",display:"All I Want For Christmas Is You - Mariah Carey",seedLen:12},{sid:"7f0f162d111f880cf77ff9bed15acd5d",display:"Middle - Zedd",seedLen:9},{sid:"077b40997776b84366ee18056948ae38",display:"Locked Out Of Heaven - Bruno Mars",seedLen:20},{sid:"065b1c94fe8545bbe8eeec2f1bf4efa2",display:"Just Give Me A Reason - Pink",seedLen:16},{sid:"f2062929514d3084f73a1ad81bbbe01f",display:"Let It Go - Idina Menzel",seedLen:20},{sid:"68ce7fc929f395291507cc47510cd82c",display:"Where Is The Love - Black Eyed Peas",seedLen:12},{sid:"6ae7e284e78824ee4c17dc6e6bda361c",display:"Fuer Elise - Ludwig Van Beethoven",seedLen:14},{sid:"73b2b8e7db746b7e4b6fc3fa4658671b",display:"The Four Seasons Concert No 4 Winter - Antonio Vivaldi",seedLen:15},{sid:"b51d911631b67babe1612dae455600e3",display:"In The End - Linkin Park - Chorus",seedLen:15},{sid:"81efc618ff11aa17d4e96219380c115e",display:"Hey Jude - The Beatles - Chorus",seedLen:15},{sid:"583aee3ac9d91125102096d28926702b",display:"Oops I Did It Again - Britney Spears - Chorus",seedLen:13},{sid:"e250d1faf9b3265f23c049d113f8a773",display:"Legend Of Zelda Main Theme - Nintendo",seedLen:10},{sid:"e8820e3b81d2429d684c986ce2f57071",display:"I Dont Want To Miss A Thing - Aerosmith - Chorus",seedLen:15},{sid:"83ee71fe7fef0bd1fd15a49740cfc967",display:"Everywhere - Michelle Branch - Chorus"},{sid:"1b341ae44d35a6c8d21f6ba3af65dd97",display:"I Kissed A Girl - Katy Perry - Chorus"},{sid:"4296f489066d02db3491bcde78667746",display:"Symphony No 40 In G Minor I - Wolfgang Amadeus Mozart - Verse",seedLen:22},{sid:"8c0b6ff7e893dca13edd90a4d9ebb892",display:"Stairway To Heaven - Led Zeppelin - Intro"},{sid:"c8bcf08c8d31c98c61a91b2d90a9cdde",display:"Complicated - Avril Lavigne - Chorus",seedLen:15},{sid:"50b4cbff1b6c2886c31332e5fb1a5f56",display:"Stronger - Kanye West - Chorus",seedLen:15},{sid:"bb3324a9068db739eff1b2fc1cc0670b",display:"Bad Romance - Lady Gaga - Chorus",seedLen:12}];function Lr(){return jr[Math.floor(Math.random()*jr.length)]}i["default"].use(m["a"]);var Nr=new m["a"]({routes:[{path:"/about",name:"about",component:B},{path:"/",redirect:"/shuffle"},{path:"/shuffle",redirect:function(e){var t=Lr();return"/song/".concat(t.sid)}},{path:"/song/:sid",component:gr},{path:"/song/:sid",component:gr},{path:"/predict/:pid",component:gr},{path:"/sheet",name:"sheet",component:Cr}],mode:"history",linkActiveClass:"active"}),Mr=Nr;Nr.beforeEach((function(e,t,n){if(e.redirectedFrom&&"/#"===e.redirectedFrom.substr(0,2)){var i=e.redirectedFrom.substr(2);console.log("Rerouted from ".concat(e.redirectedFrom," to ").concat(i)),n({path:i,replace:!0})}else n()}));n("4de4"),n("a15b"),n("3ca3");var Pr=n("15fd"),Er=n("3835"),qr=n("bc3a"),Dr=n.n(qr),Rr=n("21a6"),Ir=Dr.a.create({baseURL:"https://api.musicautobot.com/",timeout:18e4}),Ar="https://s3-us-west-2.amazonaws.com/ashaw-midi-web-server/",Br={song:"examples/seed",songList:"examples/json/htlist.json",predict:"generated"};Ir.interceptors.response.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)}));var $r={axios:Ir,fetchSongs:function(){return Object(Mn["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ir.get(Ar+Br.songList);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))()},fetchMidi:function(e,t){return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=Br[t],r=e.split("").reverse().join(""),n.next=4,Ir.get(Ar+"".concat(i,"/").concat(r,".mid"),{responseType:"arraybuffer"});case 4:return a=n.sent,n.abrupt("return",a.data);case 6:case"end":return n.stop()}}),n)})))()},fetchJson:function(e,t){return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=Br[t],r=e.split("").reverse().join(""),n.next=4,Ir.get(Ar+"".concat(i,"/").concat(r,".json"));case 4:return a=n.sent,n.abrupt("return",a.data);case 6:case"end":return n.stop()}}),n)})))()},loadState:function(e){var t=arguments,n=this;return Object(Mn["a"])(regeneratorRuntime.mark((function i(){var r,a,o,s,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:"predict",i.next=3,Promise.all([n.fetchMidi(e,r),n.fetchJson(e,r)]);case 3:return a=i.sent,o=Object(Er["a"])(a,2),s=o[0],c=o[1],i.abrupt("return",{midiBuffer:s,store:c});case 8:case"end":return i.stop()}}),i)})))()},predictMidi:function(e){var t=this;return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.midi,r=Object(Pr["a"])(e,["midi"]),a=new FormData,a.append("midi",t.midiToBlob(i)),s.a.forOwn(r,(function(e,t){a.append(t,e)})),o={headers:{"content-type":"multipart/form-data"}},n.next=7,Ir.post("predict/midi",a,o);case 7:return c=n.sent,console.log("Response:",c),n.abrupt("return",c.data);case 10:case"end":return n.stop()}}),n)})))()},convertToXML:function(e){var t=this;return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.midi,r=new FormData,r.append("midi",t.midiToBlob(i)),a={headers:{"content-type":"multipart/form-data"}},n.next=6,Ir.post("midi/convert",r,a);case 6:return o=n.sent,n.abrupt("return",o.data);case 8:case"end":return n.stop()}}),n)})))()},midiToBlob:function(e){return new Blob([e.toArray()],{type:"audio/midi"})},exportMidi:function(e){var t=e.midi,n=e.fileName;Object(Rr["saveAs"])(this.midiToBlob(t),n)},saveStore:function(e){var t=this;return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.midi,r=Object(Pr["a"])(e,["midi"]),a=new FormData,a.append("midi",t.midiToBlob(i)),s.a.forOwn(r,(function(e,t){a.append(t,e)})),o={headers:{"content-type":"multipart/form-data"}},n.next=7,Ir.post("store/save",a,o);case 7:return c=n.sent,console.log("Response:",c),n.abrupt("return",c.data);case 10:case"end":return n.stop()}}),n)})))()}},Fr=(n("4160"),n("159b"),n("ef75"));function Kr(e){var t=e.name,n=s.a.get(e,"header.tempos[0].bpm",120),i=[];return e.tracks.forEach((function(e,t){e.notes.forEach((function(e){i.push({key:e.midi,track:t,timing:ke(e.time,n),length:ke(e.duration,n)})}))})),{notes:i,bpm:n,midiName:t}}function Vr(e){return new Fr["Midi"](e)}function Xr(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.map((function(e,i){var r={midi:e.key,track:e.track,time:s.a.round(we(e.timing,t),3),duration:we(e.length,t),velocity:.8};return n&&(r.index=i),r})).sort((function(e,t){return e.time-t.time})).filter((function(e){return e.duration>0})).filter((function(e){return e.time>=-.1}));return i}function Gr(e){var t=e.bpm,n=e.name,i=void 0===n?"":n,r={name:i,ppq:220,meta:[],tempos:[{ticks:0,bpm:t}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}],keySignatures:[{key:"C",scale:"major",ticks:0}]};return r}function Wr(e){var t=e.name,n=void 0===t?"":t;return{name:n,channel:0,instrument:{number:0,name:"acoustic grand piano",family:"piano"},controlChanges:{},notes:[]}}function zr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=e.seqName,r=e.bpm,a=e.notes;null!=t&&(a=a.filter((function(e){var i=-1!==n&&e.track!==n,r=s.a.round(e.timing,3)<t;return!(e.length<0)&&(r||i)})));var o=new Fr["Midi"];o.header.fromJSON(Gr({bpm:r,name:i}));var c=Xr(a,r,!1),u=s.a.max(c.map((function(e){return e.track})))+1,l=s.a.range(u).map((function(e){var t=o.addTrack();return t.fromJSON(Wr({name:i})),t}));return c.forEach((function(e){l[e.track].addNote(e)})),{midi:o,bpm:r,seqName:i}}var Hr={songs:[],sid:null,nSteps:400,seedLen:10,maskStart:1,maskEnd:null,durationTemp:.7,noteTemp:1.2,topK:24,topP:.92,midiXML:null,tutorialStep:10,loadingState:null,predictionType:L.next},Ur={updateSID:function(e,t){e.sid=t},updateTutorialStep:function(e,t){e.tutorialStep},updateSongs:function(e,t){e.songs=t},updateSteps:function(e,t){e.nSteps=t},updateSeedLen:function(e,t){e.seedLen=t},updateMaskStart:function(e,t){e.maskStart=t},updateMaskEnd:function(e,t){e.maskEnd=t},updatePredictionType:function(e,t){e.predictionType=t,e.noteTemp=t.temp[0],e.durationTemp=t.temp[1],e.topK=t.filter[0],e.topP=t.filter[1]},updateNoteTemp:function(e,t){e.noteTemp=t},updateDurationTemp:function(e,t){e.durationTemp=t},updateMidiXML:function(e,t){e.midiXML=t},fromSave:function(e,t){for(var n in e.predictionType=N(t.predictionType,e.predictionType),delete t.predictionType,e)s.a.has(t,n)&&(e[n]=t[n])},updateLoadingState:function(e,t){e.loadingState=t,console.log("Updating loading state:",t)},showError:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;e.loadingState=t,console.log("Updating with error:",t),setTimeout((function(){e.loadingState=null}),n)}},Jr={fetchSongs:function(e){return Object(Mn["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,$r.fetchSongs().then((function(e){n("updateSongs",e)}));case 2:case"end":return t.stop()}}),t)})))()},predictMidi:function(e){return Object(Mn["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,e.rootState,n("showError","Server no longer in service... \n However, you can host your own with code here: https://github.com/bearpelican/musicautobot",1e4);case 2:case"end":return t.stop()}}),t)})))()},saveMidi:function(e){return Object(Mn["a"])(regeneratorRuntime.mark((function t(){var n,i,r,a,o,c,u,l,d,p,h,f,m,g,v,b,y,w,k,_,T,x,S;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,i=e.rootState,n("updateLoadingState","Making music..."),n("updateTutorialStep",2),r=i.predict,a=r.nSteps,o=r.predictionType,c=r.durationTemp,u=r.noteTemp,l=r.seedLen,d=r.maskStart,p=r.maskEnd,h=r.topK,f=r.topP,m=zr(i.sequence),g=m.midi,v=m.bpm,b=m.seqName,y={midi:g,bpm:v,seqName:b,nSteps:a,predictionType:o.name,durationTemp:c,noteTemp:u,seedLen:l,maskStart:d,maskEnd:p,topK:h,topP:f},w=s.a.omitBy(y,s.a.isNil),k=-10,_=setInterval((function(){k>0&&n("updateLoadingState","Generating steps (".concat(k," / ").concat(a,")...")),k+=1}),100),setTimeout((function(){null!=_&&(clearInterval(_),n("showError","Error: Timeout trying to generate sequence..."))}),250*a),T=null,x=null,t.prev=12,t.next=15,$r.saveStore(w);case 15:S=t.sent,x=S.result,T=S.error,t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](12),T=t.t0;case 23:if(!T){t.next=27;break}return clearInterval(_),n("showError","Error: ".concat(T)),t.abrupt("return",null);case 27:return clearInterval(_),_=null,t.abrupt("return",x);case 30:case"end":return t.stop()}}),t,null,[[12,20]])})))()},convertToXML:function(e){return Object(Mn["a"])(regeneratorRuntime.mark((function t(){var n,i,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,i=e.rootState,r=zr(i.sequence,null),a=r.midi,t.next=4,$r.convertToXML({midi:a});case 4:return o=t.sent,console.log("Result returned from convertToXML:",o),n("updateMidiXML",o),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})))()},loadOrig:function(e,t){return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,r=e.dispatch,n.next=3,$r.fetchMidi(t,"song");case 3:return a=n.sent,i("updateSID",t),n.next=7,r("sequence/loadOrigBuffer",{midiBuffer:a},{root:!0});case 7:case"end":return n.stop()}}),n)})))()},loadSong:function(e,t){return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a,o,s,c,u,l,d,p,h,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,r=e.dispatch,a=e.state,i("updateLoadingState","Loading song..."),o=a.sid,i("updateSID",t),i("sequence/updateOrigNotes",{notes:[]},{root:!0}),s=null,c=null,n.prev=7,n.next=10,$r.loadState(t,"song");case 10:u=n.sent,s=u.midiBuffer,c=u.store,n.next=22;break;case 15:return n.prev=15,n.t0=n["catch"](7),n.next=19,$r.loadState(t,"predict");case 19:l=n.sent,s=l.midiBuffer,c=l.store;case 22:return i("fromSave",c),d=c,p=d.display,n.next=26,r("sequence/loadMidiBuffer",{midiBuffer:s,seqName:p,savePrevious:!1},{root:!0});case 26:h=n.sent,f=h.notes,i("updateLoadingState",null),o!==t&&(i("updateMaskStart",Math.ceil(Math.min.apply(Math,Object(J["a"])(f.map((function(e){return e.timing})))))+2),i("updateMaskEnd",Math.floor(Math.max.apply(Math,Object(J["a"])(f.map((function(e){return e.timing+e.length})))))-2));case 30:case"end":return n.stop()}}),n,null,[[7,15]])})))()},loadPrediction:function(e,t){return Object(Mn["a"])(regeneratorRuntime.mark((function n(){var i,r,a,o,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,r=e.dispatch,i("updateLoadingState","Loading prediction..."),n.next=4,$r.loadState(t,"predict");case 4:return a=n.sent,o=a.midiBuffer,s=a.store,i("fromSave",s),c=s.seqName,u=s.originalSID,u&&r("loadOrig",u),n.next=12,r("sequence/loadMidiBuffer",{midiBuffer:o,seqName:c,savePrevious:!1},{root:!0});case 12:i("updateLoadingState",null);case 13:case"end":return n.stop()}}),n)})))()}},Yr={namespaced:!0,state:Hr,mutations:Ur,actions:Jr},Zr=(n("a434"),{progressTime:0,playOffset:0,currentLength:k,currentTrack:0,selectedNote:null,isEditingScore:!1,scrollTopPosition:0,scrollLeftPosition:0,previewingKeyNumber:null,appState:"editing",notes:[],prevNotes:[],origNotes:[],version:0,bpm:120,seqName:"Untitled",duration:0,instrumentType:"piano",playbackVersion:"prediction"}),Qr={updateCurrentLength:function(e,t){e.currentLength=t},updateSelectedNote:function(e,t){e.selectedNote=t},addNote:function(e,t){var n=t.key,i=t.timing,r=t.length,a=t.track;e.notes.push({key:n,timing:i,length:r,track:a})},updateNoteLength:function(e,t){var n=t.index,i=t.length;e.notes[n].length=i},updateNoteTiming:function(e,t){var n=t.index,i=t.timing;e.notes[n].timing=i},updateNoteKeyNumber:function(e,t){var n=t.index,i=t.keyNumber;e.notes[n].key=i},removeNote:function(e,t){e.notes.splice(t,1)},startEditingScore:function(e){e.isEditingScore=!0},finishEditingScore:function(e){e.isEditingScore=!1},scrollTop:function(e,t){e.scrollTopPosition=t},scrollLeft:function(e,t){e.scrollLeftPosition=t},startPreview:function(e,t){var n=t.keyNumber;t.timeout;e.previewingKeyNumber=n},finishPreview:function(e){e.previewingKeyNumber=null},play:function(e){e.appState="playing"},stop:function(e){e.appState="editing",e.progressTime=e.playOffset},finishMusic:function(){Zr.appState="editing"},updateInstrumentType:function(e,t){var n=t.instrumentType;e.instrumentType=n},updatePlaybackVersion:function(e,t){var n=t.playbackVersion;e.playbackVersion=n},updateBPM:function(e,t){e.bpm=parseInt(t)},updateSeqName:function(e,t){e.seqName=t},updateProgressTime:function(e,t){e.progressTime=t},updatePlayOffset:function(e,t){e.playOffset=t},updateOrigNotes:function(e,t){var n=t.notes;e.origNotes=n},updateNotes:function(e,t){var n=t.notes,i=t.bpm,r=t.seqName,a=t.savePrevious,o=void 0===a||a;e.version+=1,e.progressTime=0,console.log("Version:",e.version),e.prevNotes=o?e.notes:[],e.notes=n,e.bpm=parseInt(i),e.seqName=r,e.playbackVersion="prediction"}};function ea(e){var t={loadMidi:function(e,t){var n=e.commit,i=t.midi,r=t.seqName,a=t.savePrevious,o=void 0===a||a,c=Kr(i),u=c.notes,l=c.midiName,d=c.bpm;return s.a.isEmpty(r)&&(r=l),n("updateNotes",{notes:u,bpm:d,seqName:r,savePrevious:o}),{notes:u,bpm:d}},loadMidiBuffer:function(e,t){var n=e.dispatch,i=t.midiBuffer,r=t.seqName,a=t.savePrevious,o=void 0===a||a;return n("loadMidi",{midi:Vr(i),seqName:r,savePrevious:o})},loadOrigBuffer:function(e,t){var n=e.commit,i=t.midiBuffer,r=Vr(i),a=Kr(r),o=a.notes;return n("updateOrigNotes",{notes:o}),o},clear:function(e){var t=e.commit;t("updateNotes",{notes:[],bpm:120,seqName:"Untitled",savePrevious:!0})},exportMidi:function(e){var t=e.state,n=zr(t,null),i=n.midi,r=n.seqName;$r.exportMidi({midi:i,fileName:"".concat(r,".mid")})}};return e.forEach((function(e){t[e]=function(t,n){var i=t.commit;0===n||n?i(e,n):i(e)}})),t}var ta=Object(K["a"])({},ea(["updateCurrentLength","addNote","removeNote","updateNoteLength","updateNoteTiming","updateNoteKeyNumber","startEditingScore","finishEditingScore","scrollTop","scrollLeft","startPreview","finishPreview","play","stop","finishMusic","updateProgressTime","updateBPM","updateInstrumentType","updatePlaybackVersion","updateSeqName"])),na={scoreLength:function(e,t){return Math.max(O,t.sequenceLength+8)},sequenceLength:function(e){return s.a.round(Math.max.apply(Math,Object(J["a"])(e.notes.map((function(e){return e.timing+e.length})))),3)}},ia={namespaced:!0,state:Zr,mutations:Qr,actions:ta,getters:na},ra=(n("5319"),n("d4ec")),aa=n("bee2"),oa=n("5e54");function sa(){return new oa["d"]({A0:"A0.[mp3|ogg]",C1:"C1.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]",A1:"A1.[mp3|ogg]",C2:"C2.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]",A2:"A2.[mp3|ogg]",C3:"C3.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]",A3:"A3.[mp3|ogg]",C4:"C4.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",A4:"A4.[mp3|ogg]",C5:"C5.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A5:"A5.[mp3|ogg]",C6:"C6.[mp3|ogg]","D#6":"Ds6.[mp3|ogg]","F#6":"Fs6.[mp3|ogg]",A6:"A6.[mp3|ogg]",C7:"C7.[mp3|ogg]","D#7":"Ds7.[mp3|ogg]","F#7":"Fs7.[mp3|ogg]",A7:"A7.[mp3|ogg]",C8:"C8.[mp3|ogg]"},(function(){}),"https://s3-us-west-2.amazonaws.com/ashaw-midi-web-server/audio/salamander/").toDestination()}function ca(){return(new oa["c"]).toDestination()}var ua=function(){function e(t){var n=this;Object(ra["a"])(this,e),this.store=t,this.notes=[],this.synth=sa(),this.part=null,this.currentPreview=null,this.syncedEvents=[],this.progress=null,this.stopTimeout=null,t.subscribe((function(e,t){switch(e.type.replace("sequence/","")){case"updateInstrumentType":n.updateInstrumentType(e.payload);break;case"startPreview":n.startPreview(e.payload);break;case"finishPreview":n.finishPreview();break;case"play":var i="original"===t.sequence.playbackVersion?t.sequence.origNotes:t.sequence.notes;n.play(i,t.sequence.bpm,t.sequence.playOffset);break;case"stop":n.stop();break;case"updatePlayOffset":var r="original"===t.sequence.playbackVersion?t.sequence.origNotes:t.sequence.notes;n.playNotesOnBeat(r,t.sequence.playOffset);break;default:break}}))}return Object(aa["a"])(e,[{key:"stop",value:function(){this.reset(),this.store.commit("sequence/finishMusic")}},{key:"reset",value:function(){null!=this.progress&&(clearInterval(this.progress),this.progress=null),null!=this.stopTimeout&&(clearTimeout(this.stopTimeout),this.stopTimeout=null),oa["f"].stop(),oa["f"].cancel(0),this.notes=[]}},{key:"updateInstrumentType",value:function(e){var t=e.instrumentType;this.synth.unsync(),this.synth="synth"===t?ca():sa()}},{key:"startPreview",value:function(e){var t=this,n=e.keyNumber,i=e.timeout;this.finishPreview(),this.synth.triggerAttack(oa["a"](n)),this.currentPreview=n,s.a.isNumber(i)&&setTimeout((function(){t.finishPreview()}),1e3*i)}},{key:"finishPreview",value:function(){null!=this.currentPreview&&(this.synth.triggerRelease(oa["a"](this.currentPreview)),this.currentPreview=null)}},{key:"endTime",value:function(e){var t=0;return e.forEach((function(e){t=Math.max(t,e.duration+e.time)})),t}},{key:"play",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.reset(),this.notes=Xr(e,t),oa["f"].bpm.value=t;var r=new oa["b"]((function(e,t){n.synth.triggerAttackRelease(oa["a"](t.midi),t.duration,e)}),this.notes),a=we(i,t);r.start(0,"".concat(a)),"stopped"===oa["f"].state&&(oa["g"](),oa["f"].start()),this.progress=setInterval((function(){var e=ke(oa["f"].seconds+a,t);n.store.commit("sequence/updateProgressTime",e)}),5),this.stopTimeout=setTimeout((function(){n.stop()}),1e3*(this.endTime(this.notes)+1-a))}},{key:"playNotesOnBeat",value:function(e,t){var n=e.filter((function(e){return e.timing<=t&&e.timing+e.length>t})).map((function(e){return oa["a"](e.key)}));this.synth.triggerAttackRelease(n,"1n",void 0,.1)}}]),e}();function la(e){return new ua(e)}i["default"].use(U["b"]);var da=new U["b"].Store({modules:{sequence:ia,predict:Yr},plugins:[la]}),pa=n("ce5b"),ha=n.n(pa),fa=n("0284"),ma=n.n(fa);i["default"].config.productionTip=!1,i["default"].use(ma.a,{id:"UA-145168476-1",router:Mr,debug:{sendHitTask:!0}});var ga={};i["default"].use(ha.a),i["default"].use(a.a,{name:"custom",lodash:s.a}),new i["default"]({router:Mr,store:da,render:function(e){return e(f)},vuetify:new ha.a(ga)}).$mount("#app")},5718:function(e,t,n){"use strict";var i=n("b314"),r=n.n(i);r.a},"5c0b":function(e,t,n){"use strict";var i=n("9c0c"),r=n.n(i);r.a},"619b":function(e,t,n){},6912:function(e,t,n){"use strict";var i=n("a8a0"),r=n.n(i);r.a},"75ad":function(e,t,n){},"77c7":function(e,t,n){},7983:function(e,t,n){},"7a0f":function(e,t,n){},"817c":function(e,t,n){"use strict";var i=n("7983"),r=n.n(i);r.a},"84ef":function(e,t,n){},"87f5":function(e,t,n){},9212:function(e,t,n){},"947a":function(e,t,n){},"94d0":function(e,t,n){},"9c0c":function(e,t,n){},"9ce8":function(e,t,n){"use strict";var i=n("84ef"),r=n.n(i);r.a},a8a0:function(e,t,n){},b19f:function(e,t,n){},b26c:function(e,t,n){"use strict";var i=n("217c"),r=n.n(i);r.a},b314:function(e,t,n){},b3b8:function(e,t,n){"use strict";var i=n("53b5"),r=n.n(i);r.a},b8a0:function(e,t,n){"use strict";var i=n("d46e"),r=n.n(i);r.a},b9eb:function(e,t,n){"use strict";var i=n("32ad"),r=n.n(i);r.a},bae4:function(e,t,n){"use strict";var i=n("87f5"),r=n.n(i);r.a},bd25:function(e,t,n){},bed0:function(e,t,n){},c188:function(e,t,n){},c1c2:function(e,t,n){e.exports=n.p+"static/img/autobot_optimus.9dc92e9e.png"},c8cf:function(e,t,n){"use strict";var i=n("9212"),r=n.n(i);r.a},cd9c:function(e,t,n){},cff9:function(e,t,n){},d27a:function(e,t,n){"use strict";var i=n("cd9c"),r=n.n(i);r.a},d46e:function(e,t,n){},db2f:function(e,t,n){"use strict";var i=n("619b"),r=n.n(i);r.a},dbef:function(e,t,n){"use strict";var i=n("0028"),r=n.n(i);r.a},e1d9:function(e,t,n){"use strict";var i=n("4ae2"),r=n.n(i);r.a},e6f4:function(e,t,n){"use strict";var i=n("bed0"),r=n.n(i);r.a},f05a:function(e,t,n){"use strict";var i=n("75ad"),r=n.n(i);r.a},f5ef:function(e,t,n){},f65d:function(e,t,n){},f892:function(e,t,n){"use strict";var i=n("b19f"),r=n.n(i);r.a},f9ae:function(e,t,n){},fd6c:function(e,t,n){"use strict";var i=n("f9ae"),r=n.n(i);r.a}});
//# sourceMappingURL=app.d035ebd0.js.map